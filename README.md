# ğŸ¥— diet-record é£²é£Ÿç´€éŒ„ç³»çµ±

ä¸€å€‹ä»¥ Hono + Cloudflare D1 + Bootstrap è£½ä½œçš„é£²é£Ÿç´€éŒ„ç³»çµ±ï¼Œæ”¯æ´ï¼š

## ğŸ”§ åŠŸèƒ½ä»‹ç´¹

- ğŸ§‘â€ğŸ’¼ ä½¿ç”¨è€…ç®¡ç†
  - é¦–ä½ä½¿ç”¨è€…å¯è¨»å†Šï¼Œå¾ŒçºŒåƒ…èƒ½ç™»å…¥
  - JWT é©—è­‰èˆ‡ User-Agent å®‰å…¨é©—è­‰
- ğŸ¥— é£²é£Ÿç´€éŒ„ç®¡ç†
  - æ”¯æ´å…­å¤§é¡é£Ÿç‰©è¼¸å…¥ï¼Œè‡ªå‹•ä¼°ç®—ç†±é‡èˆ‡ç‡Ÿé¤Šç´ 
  - è³‡æ–™æŸ¥è©¢ã€ç¯©é¸ã€åˆ†é ã€CRUD ç·¨è¼¯
- ğŸ“ˆ çµ±è¨ˆåˆ†æèˆ‡åœ–è¡¨
  - æ”¯æ´å¿«é€Ÿç¯„åœï¼ˆä»Šå¤©ï¼æ˜¨å¤©ï¼ä¸ƒæ—¥ï¼30 æ—¥ï¼è‡ªè¨‚ï¼‰
  - é¡¯ç¤ºæ¯æ—¥æ”å–ã€ç‡Ÿé¤Šçµ„æˆè¶¨å‹¢æŠ˜ç·šåœ–èˆ‡åœ“é¤…åœ–
  - æä¾›çµ±è¨ˆæ‘˜è¦ï¼ˆå¤©æ•¸ã€ç¸½ç­†æ•¸ã€å¹³å‡æ¯æ—¥è¨˜éŒ„ï¼‰
  - å«å…­å¤§é¡èˆ‡ä¸‰å¤§ç‡Ÿé¤Šç´ çš„ç¸½è¨ˆèˆ‡æ¯ç­†å¹³å‡

## ğŸ“„ é é¢é è¦½

- `login.html`ï¼šå¸³è™Ÿå¯†ç¢¼ç™»å…¥èˆ‡è¨»å†Š
- `logs.html`ï¼š
  - é£²é£Ÿç´€éŒ„è¡¨å–®ï¼ˆæ–°å¢ï¼æŸ¥è©¢ï¼ç·¨è¼¯ï¼åˆªé™¤ï¼‰
  - å¯æœå°‹æ™‚é–“ã€æè¿°ï¼Œæ”¯æ´åˆ†é èˆ‡æ’åº
- `report.html`ï¼š
  - åœ–è¡¨åˆ†æï¼ˆå…­å¤§é¡ç‡Ÿé¤Šç´ ï¼ä¸‰å¤§ç‡Ÿé¤Šç´ è¶¨å‹¢ï¼‰
  - è¡¨æ ¼çµ±è¨ˆæ‘˜è¦ï¼Œå¹³å‡èˆ‡ç¸½è¨ˆè³‡æ–™

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```bash
diet-record/
â”œâ”€â”€ public/                 # éœæ…‹å‰ç«¯é é¢èˆ‡è³‡æº
â”‚   â”œâ”€â”€ login.html          # ç™»å…¥èˆ‡è¨»å†Šç•«é¢
â”‚   â”œâ”€â”€ logs.html           # é£²é£Ÿç´€éŒ„è¡¨å–®
â”‚   â”œâ”€â”€ report.html         # çµ±è¨ˆåˆ†æèˆ‡åœ–è¡¨
â”‚   â”œâ”€â”€ js/                 # å‰ç«¯ JS æ¨¡çµ„ï¼ˆæ¨¡çµ„åŒ–ç®¡ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ logs-form.js
â”‚   â”‚   â”œâ”€â”€ logs-table.js
â”‚   â”‚   â”œâ”€â”€ nutrition.js
â”‚   â”‚   â”œâ”€â”€ report.js
â”‚   â”‚   â””â”€â”€ user-profile.js
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ style.css       # è‡ªè¨‚æ¨£å¼
â”œâ”€â”€ src/                    # Workers å¾Œç«¯ç¨‹å¼
â”‚   â”œâ”€â”€ index.ts            # Worker å…¥å£èˆ‡è·¯ç”±æ•´åˆ
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.ts         # /api/login ç™»å…¥ï¼è¨»å†Š
â”‚   â”‚   â”œâ”€â”€ logs.ts         # /api/logs CRUD æ“ä½œ
â”‚   â”‚   â””â”€â”€ stats.ts        # /api/stats çµ±è¨ˆåˆ†æ
â”‚   â””â”€â”€ middleware/
â”‚       â””â”€â”€ auth.ts         # JWT é©—è­‰ä¸­ä»‹å±¤
â”œâ”€â”€ wrangler.toml           # Workers è¨­å®šï¼ˆD1ã€éœæ…‹è³‡æºï¼‰
â”œâ”€â”€ init.sql                # D1 è³‡æ–™è¡¨çµæ§‹åˆå§‹åŒ–
â””â”€â”€ README.md
```

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### 1. å®‰è£ä¾è³´å¥—ä»¶

```bash
npm install
```

2. åˆå§‹åŒ–è³‡æ–™åº«ï¼ˆD1ï¼‰

wrangler d1 create diet-record-db
wrangler d1 execute diet-record-db --file=init.sql

æ›´æ–° wrangler.tomlï¼š

```bash
{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "diet-record",
  "main": "src/index.ts",
  "compatibility_date": "2025-07-03",
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "diet-record-db",
      "database_id": "<ä½ çš„è³‡æ–™åº« ID>"
    }
  ],
  "observability": {
		"enabled": true
	},
	"assets": {
		"directory": "./public",
		"binding": "ASSETS"
	}
}
```

3. è¨­å®š JWT å¯†é‘°

wrangler secret put JWT_SECRET

4. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆæœ¬æ©Ÿï¼‰

wrangler dev

è¨ªå• http://localhost:8787 è‡ªè¡Œæ¸¬è©¦

â¸»

ğŸ›¡ ä½¿ç”¨è€…ç™»å…¥èªªæ˜

- é¦–æ¬¡è¨»å†Šåƒ…å…è¨±ç¬¬ä¸€ä½ç”¨æˆ¶è¼¸å…¥åå­—å»ºç«‹å¸³è™Ÿï¼ˆè‡ªå‹•è¨»å†Šï¼‰
- å¾ŒçºŒåªèƒ½ç™»å…¥ï¼Œç„¡æ³•æ–°å¢å…¶ä»–ç”¨æˆ¶

â¸»

ğŸ“œ License

MIT License
